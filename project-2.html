<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EFE - Reform From Violence</title>
  <meta name="description" content="Laporkan tindakan kekerasan secara anonim dan aman." />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="project-2.css" />
</head>

<body>
  <header class="hero">
    <nav class="navbar">
      <div class="nav-logo">EFE</div>
      <div class="nav-toggle" id="navToggle">&#9776;</div>
      <ul class="nav-links" id="navLinks">
        <li><a href="#about" class="nav-link">About</a></li>
        <li><a href="#report" class="nav-link">Report</a></li>
        <li><a href="#contact" class="nav-link">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="main">
    <section class="Header1" id="home">
      <h1>EFE</h1>
      <h1>Reform From Violence</h1>
      <p class="About">Laporkan kekerasan secara cepat dan aman melalui platform kami.</p>
    </section>

    <!-- About Section -->
    <section id="about">
      <h2>About</h2>
      <p>EFE adalah platform yang bertujuan untuk membantu masyarakat melaporkan tindakan kekerasan secara anonim dan aman.</p>
    </section>

    <!-- Report Section -->
    <section id="report">
      <h2>Report</h2>
      <h3>Laporan Anda</h3>

      <div class="form-group">
        <label for="input-name">Nama Anda</label>
        <input type="text" id="input-name" placeholder="Nama" />
      </div>

      <div class="form-group">
        <label for="input-email">Alamat Email Anda</label>
        <input type="email" id="input-email" placeholder="Alamat Email" />
      </div>

      <div class="form-group">
        <label for="input-date">Tanggal</label>
        <input type="date" id="input-date" />
      </div>

      <div class="form-group">
        <label for="input-location">Lokasi Kejadian</label>
        <input type="text" id="input-location" placeholder="Lokasi Kejadian" />
      </div>

      <div class="form-group">
        <label for="input-address">Alamat Rumah</label>
        <input type="text" id="input-address" placeholder="Alamat" />
      </div>

      <button class="btn-submit">Submit</button>
    </section>

    <!-- Contact Section -->
    <section id="contact">
      <h2>Contact</h2>
      <p>Email: ino.ila1507@gmail.com</p>
      <p>Telp: +62 851-5602-6998</p>
    </section>
  </main>

  <footer>
    <div class="footer-container">
      <div class="footer-section">
        <h4>Disclaimer</h4>
        <p>Website ini hanyalah prototype yang dikembangkan hanya untuk lomba. Banyak fitur dari website ini yang belum diimplementasikan dan akan ditambah di hari kedepannya.</p>
      </div>
      <div class="footer-section">
        <h4>Kontak</h4>
        <p>Email: ino.ila1507@gmail.com</p>
        <p>Telp: +62 851-5602-6998</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Alvino Rafansyah Indhrawan. Hak Cipta Dilindungi.</p>
    </div>
  </footer>

  <script>
    const navToggle = document.getElementById("navToggle");
    const navLinks = document.getElementById("navLinks");
    const navLinkEls = document.querySelectorAll(".nav-link");
    const sections = document.querySelectorAll("section");

    navToggle.addEventListener("click", () => {
      navLinks.classList.toggle("show");
    });

    window.addEventListener("scroll", () => {
      let current = "";
      sections.forEach((section) => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        if (pageYOffset >= sectionTop - sectionHeight / 3) {
          current = section.getAttribute("id");
        }
      });

      navLinkEls.forEach((link) => {
        link.classList.remove("active");
        if (link.getAttribute("href") === `#${current}`) {
          link.classList.add("active");
        }
      });
    });

    // Form submission with anti-spam
    const scriptURL = 'https://script.google.com/macros/s/AKfycbws118iJuhS-5wVCsJw3ZTn1rE8bLCZxmzt6O6iIXqvyY-C0DWjjFnhhJNGzhrrH3aM/exec';
    const submitBtn = document.querySelector(".btn-submit");

    submitBtn.addEventListener("click", (e) => {
      e.preventDefault();

      const lastSent = localStorage.getItem("lastReportTime");
      const now = Date.now();
      if (lastSent && now - lastSent < 2 * 60 * 1000) {
        alert("Tunggu 2 menit sebelum mengirim laporan lagi.");
        return;
      }

      const formData = new FormData();
      formData.append("name", document.getElementById("input-name").value);
      formData.append("email", document.getElementById("input-email").value);
      formData.append("date", document.getElementById("input-date").value);
      formData.append("location", document.getElementById("input-location").value);
      formData.append("address", document.getElementById("input-address").value);

      fetch(scriptURL, {
        method: "POST",
        body: formData
      })
      .then(() => {
        localStorage.setItem("lastReportTime", now);
        alert("Laporan berhasil dikirim!");
      })
      .catch(() => alert("Gagal mengirim laporan."));
    });
  </script>
</body>
</html>
